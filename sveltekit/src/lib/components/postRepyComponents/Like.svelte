
<script>
    import { createEventDispatcher, onMount } from "svelte";
    import {getContext} from "svelte"
    import {blur} from "svelte/transition"
    let state = "nothing"
    let count = 0
    const dispatch = createEventDispatcher()
    const likeStateObj = getContext("likeState")
    likeStateObj.addListener((likeDislike)=>{
        state = likeDislike
    })
    async function getCounts(){
        return 10
    }
    async function addCount(){
        count ++
    }
    async function removeCount(){
        count --
    }
    onMount(async ()=>{
        count = await getCounts()
    })
    function toggle(){
        dispatch("like")
        sendUpdateRequest()
    }

    async function sendUpdateRequest(){
        fetch("api/updateSome", {
            method: "POST",
        })
    }
</script>

<!-- <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:anim="http://www.w3.org/2000/anim" anim="" anim:transform-origin="50% 50%" anim:duration="1" anim:ease="ease-in-out">
    <g id="Frame" anim:rotation="0[0:0.4:-45:ease-in][0.7:1:0:ease-out]">
      <path id="Vector" d="M20.27 16.265L20.975 12.185C21.0164 11.9459 21.005 11.7006 20.9417 11.4663C20.8783 11.232 20.7646 11.0144 20.6084 10.8287C20.4522 10.643 20.2573 10.4936 20.0373 10.391C19.8174 10.2885 19.5777 10.2352 19.335 10.235H14.154C14.0331 10.235 13.9136 10.2087 13.8039 10.1579C13.6942 10.1071 13.5968 10.0331 13.5186 9.94087C13.4404 9.84867 13.3832 9.74054 13.3509 9.624C13.3187 9.50746 13.3122 9.3853 13.332 9.26601L13.995 5.22101C14.1026 4.56424 14.0719 3.89225 13.905 3.24801C13.8336 2.98181 13.696 2.73799 13.5051 2.5392C13.3142 2.34042 13.0761 2.19313 12.813 2.11101L12.668 2.06401C12.3402 1.9587 11.9844 1.98303 11.674 2.13201C11.334 2.29601 11.086 2.59501 10.994 2.95001L10.518 4.78401C10.3665 5.36764 10.1462 5.93124 9.86199 6.46301C9.44699 7.24001 8.80499 7.86301 8.13699 8.43801L6.69799 9.67801C6.49836 9.85052 6.34244 10.0679 6.24302 10.3123C6.14359 10.5567 6.10349 10.8211 6.12599 11.084L6.93799 20.477C6.97378 20.8924 7.16403 21.2793 7.47118 21.5613C7.77833 21.8432 8.18004 21.9998 8.59699 22H13.245C16.727 22 19.698 19.574 20.27 16.265Z" fill="black" anim:scale="1[0:0.3:0.75:ease-in-out][0.3:0.8:1.25:ease-in-out][0.8:1:1:ease-in-out]" anim:rotation="0[0.3:0.7:-360:ease-in-out]"></path>
      <path id="Vector_2" fill-rule="evenodd" clip-rule="evenodd" d="M2.96799 9.485C3.16125 9.47655 3.3503 9.5431 3.49565 9.67075C3.641 9.7984 3.73141 9.97727 3.74799 10.17L4.71799 21.406C4.73442 21.5733 4.71657 21.7422 4.66553 21.9024C4.61449 22.0626 4.53133 22.2107 4.42113 22.3377C4.31093 22.4647 4.176 22.5678 4.02459 22.6409C3.87318 22.714 3.70846 22.7555 3.54049 22.7627C3.37252 22.77 3.20483 22.743 3.04766 22.6833C2.89049 22.6236 2.74714 22.5325 2.62637 22.4155C2.50559 22.2986 2.40992 22.1582 2.34521 22.003C2.2805 21.8479 2.2481 21.6811 2.24999 21.513V10.234C2.25007 10.0407 2.32479 9.85486 2.45857 9.71531C2.59235 9.57576 2.77485 9.49325 2.96799 9.485Z" fill="black" anim:x="0[0.3:0.7:-4:ease-in-out][0.7:1:0:ease-in-out]"></path>
    </g>
  </svg> -->
<button on:click={toggle}>
    Like
    {#if state=="like"}
    <svg in:blur xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" {...$$props}><path fill="currentColor" d="m20.27 16.265l.705-4.08a1.666 1.666 0 0 0-1.64-1.95h-5.181a.833.833 0 0 1-.822-.969l.663-4.045a4.783 4.783 0 0 0-.09-1.973a1.635 1.635 0 0 0-1.092-1.137l-.145-.047a1.346 1.346 0 0 0-.994.068c-.34.164-.588.463-.68.818l-.476 1.834a7.628 7.628 0 0 1-.656 1.679c-.415.777-1.057 1.4-1.725 1.975l-1.439 1.24a1.67 1.67 0 0 0-.572 1.406l.812 9.393A1.666 1.666 0 0 0 8.597 22h4.648c3.482 0 6.453-2.426 7.025-5.735"/><path fill="currentColor" fill-rule="evenodd" d="M2.968 9.485a.75.75 0 0 1 .78.685l.97 11.236a1.237 1.237 0 1 1-2.468.107V10.234a.75.75 0 0 1 .718-.749" clip-rule="evenodd"/></svg>
    {:else}
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" {...$$props}><path fill="currentColor" d="m20.975 12.185l-.739-.128zm-.705 4.08l-.74-.128zM6.938 20.477l-.747.065zm-.812-9.393l.747-.064zm7.869-5.863l.74.122zm-.663 4.045l.74.121zm-6.634.411l-.49-.568zm1.439-1.24l.49.569zm2.381-3.653l-.726-.189zm.476-1.834l.726.188zm1.674-.886l-.23.714zm.145.047l.229-.714zM9.862 6.463l.662.353zm4.043-3.215l-.726.188zm-2.23-1.116l-.326-.675zM3.971 21.471l-.748.064zM3 10.234l.747-.064a.75.75 0 0 0-1.497.064zm17.236 1.823l-.705 4.08l1.478.256l.705-4.08zm-6.991 9.193H8.596v1.5h4.649zm-5.56-.837l-.812-9.393l-1.495.129l.813 9.393zm11.846-4.276c-.507 2.93-3.15 5.113-6.286 5.113v1.5c3.826 0 7.126-2.669 7.764-6.357zM13.255 5.1l-.663 4.045l1.48.242l.663-4.044zm-6.067 5.146l1.438-1.24l-.979-1.136L6.21 9.11zm4.056-5.274l.476-1.834l-1.452-.376l-.476 1.833zm1.194-2.194l.145.047l.459-1.428l-.145-.047zm-1.915 4.038a8.378 8.378 0 0 0 .721-1.844l-1.452-.377A6.878 6.878 0 0 1 9.2 6.11zm2.06-3.991a.885.885 0 0 1 .596.61l1.452-.376a2.385 2.385 0 0 0-1.589-1.662zm-.863.313a.515.515 0 0 1 .28-.33l-.651-1.351c-.532.256-.932.73-1.081 1.305zm.28-.33a.596.596 0 0 1 .438-.03l.459-1.428a2.096 2.096 0 0 0-1.548.107zm2.154 8.176h5.18v-1.5h-5.18zM4.719 21.406L3.747 10.17l-1.494.129l.971 11.236zm-.969.107V10.234h-1.5v11.279zm-.526.022a.263.263 0 0 1 .263-.285v1.5c.726 0 1.294-.622 1.232-1.344zM14.735 5.343a5.533 5.533 0 0 0-.104-2.284l-1.452.377a4.03 4.03 0 0 1 .076 1.664zM8.596 21.25a.916.916 0 0 1-.911-.837l-1.494.129a2.416 2.416 0 0 0 2.405 2.208zm.03-12.244c.68-.586 1.413-1.283 1.898-2.19L9.2 6.109c-.346.649-.897 1.196-1.553 1.76zm13.088 3.307a2.416 2.416 0 0 0-2.38-2.829v1.5c.567 0 1 .512.902 1.073zM3.487 21.25c.146 0 .263.118.263.263h-1.5c0 .682.553 1.237 1.237 1.237zm9.105-12.105a1.583 1.583 0 0 0 1.562 1.84v-1.5a.083.083 0 0 1-.082-.098zm-5.72 1.875a.918.918 0 0 1 .316-.774l-.98-1.137a2.418 2.418 0 0 0-.83 2.04z"/></svg>
    {/if}
    {count}
</button>

<style lang="scss">

    @include responseButton;
</style>




